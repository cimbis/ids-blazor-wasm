---
title: 'Code'
order: 33
componentName: 'utils'
category: 'components'
customPath: '/components/utils/css'
---

### JavaScript Library

<div class="if text layout columns">
<div class="if text body">

Utility JavaScript library.

This library is compatible with CommonJS, ESM (ES6 module) and UMD. See documentation examples below.

</div>

</div>

#### Install

```
$ npm install @ids-core/util-js
```

Or for Yarn:

```
$ yarn add @ids-core/util-js
```

#### Features

-   debounce
-   srSpeak
-   addClass
-   trapFocus
-   removeAllOccurencesOfValueInArray
-   formatCurrency

#### API

##### trapFocus(element, ctx)

Traps focus in given element.

| Param   | Type                                                                                                                                                | Description                                                                                                                  |
| ------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| element | [`Element`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement)                                                                           | Element to trap focus in                                                                                                     |
| ctx     | [`Document`](https://developer.mozilla.org/en-US/docs/Web/API/Document)/[`ShadowRoot`](https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot) | Optional. Defaults to `document`. Should be any context we can use `activeElement` with, i.e `document` or `this.shadowRoot` |

##### debounce(func, wait, immediate)

Debounces given function.

| Param     | Type                                                                                                    | Description                  |
| --------- | ------------------------------------------------------------------------------------------------------- | ---------------------------- |
| func      | [`Function`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function) | Function to debounce         |
| wait      | [`Boolean`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)   | Time in milliseconds to wait |
| immediate | [`Number`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)     | Do it immediately            |

-   [Debouncing and Throttling Explained Through Examples](https://css-tricks.com/debouncing-throttling-explained-examples/)

##### srSpeak(text, [ariaLive, role, ariaRelevant , ariaAtomic] )

<div class="if text layout box">

**Why**

In modern web development, updating discrete regions of a screen with JavaScript is common. The use of AJAX responses in
modern JavaScript-based User Interfaces allows web developers to create beautiful interfaces similar to Desktop
applications that don't require pages to reload or refresh.

JavaScript can create great usability improvements for most users â€“ but when content is updated dynamically, it has the
potential to introduce accessibility issues. This is one of the steps you can take to handle that problem.

**What**

When a portion of a page is updated with JavaScript, the update is usually highlighted with animation and bright colors,
and is easy to see. But if you don't have the ability to see the screen, you don't know this has happened, unless the
updated region is marked as an ARIA-live region.

If this isn't marked, there's no notification for screen readers. But it's also possible that all the region content
will be announced after an update, if the ARIA live region is too large. You want to provide users with just a simple,
concise message.

**How**

That's what `srSpeak` is meant for. It's a simple tool that creates and appends an ARIA live notifications area to the
element where developers can dispatch text messages. Assistive technologies will automatically announce any text change
in this area. This ARIA live region has an ARIA role of "status" so it has an implicit aria-live value of polite and an
implicit aria-atomic value of true.

This means assistive technologies will notify users of updates but generally do not interrupt the current task, and
updates take low priority. If you're creating an application with higher priority updates (such as a notification that
their current session is about to expire, for example), then you'll want to create your own method with an `aria-live`
value of assertive.

&mdash; [_Let WordPress Speak: New in WordPress
4.2_](https://make.wordpress.org/accessibility/2015/04/15/let-wordpress-speak-new-in-wordpress-4-2/), [_
@joedolson_](https://github.com/joedolson)

</div>

| Param        | Type                                                                                                  | Default           |
| ------------ | ----------------------------------------------------------------------------------------------------- | ----------------- |
| text         | [`String`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)   | Text is mandatory |
| ariaLive     | [`String`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)   | `polite`          |
| role         | [`String`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)   | `log`             |
| ariaRelevant | [`String`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)   | `additions`       |
| ariaAtomic   | [`Boolean`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean) | `false`           |

##### formatCurrency(number, [locale, options])

Formats a number to a given locale currency
with [`Intl.NumberFormat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat)
.

Default options are:

```javascript
{
    currency: 'SEK',
        currencyDisplay
:
    'symbol',
        style
:
    'currency',
        minimumFractionDigits
:
    0
}
```

| Param   | Type                                                                                                | Default             |
| ------- | --------------------------------------------------------------------------------------------------- | ------------------- |
| number  | [`Number`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number) | Number is mandatory |
| locale  | [`String`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | `se`                |
| options | [`Object`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object) | `{}`                |

##### addClass(el, className)

A shorthand function to add classes to an element.

| Param     | Type                                                                                                | Description                              |
| --------- | --------------------------------------------------------------------------------------------------- | ---------------------------------------- |
| el        | [`HTMLElement`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement)                       | The element you want to add classes to   |
| className | [`String`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) | A string with a class or several classes |

##### removeAllOccurencesOfValueInArray(arr, value)

Removes all occurences of `value` in Array `arr`.

| Param | Type                                                                                              | Description         |
| ----- | ------------------------------------------------------------------------------------------------- | ------------------- |
| arr   | [`Array`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array) | Array to priune     |
| value | Any matchable type                                                                                | Any matchable value |
