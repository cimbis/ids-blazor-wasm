---
title: 'Validation'
order: 4
category: 'design'
subCategory: 'guidelines'
customPath: '/design/guidelines/forms'
---

<TextLayoutLeft>

We want to make filling out web forms as easy as possible. So why do we insist on validating our forms? There are three
main reasons:</p>

-   **We want to get the right data, in the right format.** Our applications won't work properly if our users' data is
    stored in the wrong format, is incorrect, or is omitted altogether.
-   **We want to protect our users' data**. Forcing our users to enter secure passwords makes it easier to protect their
    account information.
-   **We want to protect ourselves**. There are many ways that malicious users can misuse unprotected forms to damage the
    application.

</TextLayoutLeft>

<div class="if alert-banner error">
<p class="if"><strong class="if">Warning</strong>: Never trust data passed to your server from the client. Even if your form is validating correctly and preventing malformed input on the client-side, a malicious user can still alter the network request.</p>
</div>

<TextLayoutLeft>

Effective and immediate error messaging can help the user to understand the problem and how to fix it. First, inform the
user what has happened, then provide guidance on next steps or possible resolutions. Always present error states on the
form, and use inline errors whenever possible.

</TextLayoutLeft>

### Client-side validation

<TextLayoutLeft>

We recommend validating the user’s data before form submission. This type of real-time, inline validation (a.k.a.
client-side validation) should happen as soon as the field loses focus. This will help to easily identify the elements
that need to be corrected.

The validation label below the field should be as informative as possible when describing the issue with the user’s
data. For example, if password limitations require 16 characters, but the user inputs a password with only six
characters, the text should read something like, "Password must be at least 16 characters."

</TextLayoutLeft>

#### Example

This example uses
the [Constraint validation API](https://developer.mozilla.org/en-US/docs/Web/API/Constraint_validation).

The html:

```html
<form novalidate action="" class="if">
    <div class="if input-wrapper">
        <input
            data-size="larger"
            required
            placeholder="Enter your first name"
            name="first_name"
            id="first_name"
            type="text"
            minlength="2"
            class="if input-field"
        />
        <label class="if" for="first_name" aria-describedby="first_name_help-1 first_name_error-1"
            >First name*</label
        >
        <span class="if input-error" id="first_name_error-1" aria-live="polite"
            >A validation error</span
        >
        <span class="if input-help" id="first_name_help-1">A helpful text</span>
    </div>
    <div class="if input-wrapper">
        <button type="submit" id="submit" class="if primary button">Submit</button>
    </div>
</form>
```

<TextLayoutLeft>
    <p class="if">
      This simple form uses the <code class="if">novalidate</code> attribute to turn off the browser's automatic validation; this lets our script take control over validation. However, this doesn't disable support for the constraint validation API nor the application of CSS pseudo-classes like <code class="if">:valid</code>, etc. That means that even though the browser doesn't automatically check the validity of the form before sending its data, you can still do it yourself and style the form accordingly.
    </p>

Our input to validate is an `<input type="text">`, which is `required`, and has a `minlength` of 2 characters. Let's
check these using our own code, and show a custom error message for each one.

</TextLayoutLeft>

<div class="if alert-banner warning">
  <p class="if">
    <strong class="if">Note:</strong> A key point here is that setting the <code class="if">novalidate</code> attribute on the form is what stops the form from showing its own error message bubbles, and allows us to instead display the custom error messages in the DOM in some manner of our own choosing.
  </p>
</div>

Now, let's look at the JavaScript:

```javascript
const forms = document.querySelectorAll('form');
const isAllElementsValid = (els) => els.filter((el) => !el.validity.valid).length === 0;

forms.forEach((form) => {
    const formElements = Array.prototype.filter.call(
        form.elements,
        (el) => el.nodeName !== 'BUTTON'
    );

    formElements.forEach((el) => {
        el.addEventListener('blur', (e) => {
            if (el.validity.valid) {
                // In case there is an error message visible, if the field
                // is valid, we remove the error message.
                el.parentElement.querySelector('span.if.input-error').innerHTML = '';
                el.classList.remove('is-invalid');
                el.removeAttribute('aria-invalid');
            } else {
                // If there is still an error, show the correct error

                showError(el);
            }
        });
    });

    form.addEventListener('submit', (e) => {
        // if all fields are valid, we let the form submit

        if (!isAllElementsValid(formElements)) {
            // If it isn't, we display an appropriate error message
            showErrors(formElements);
            // Then we prevent the form from being sent by canceling the event
            event.preventDefault();
        } else {
            alert('valid');
        }
    });
});

const showErrors = (els) => {
    els.forEach((el) => {
        showError(el);
    });
};
```

Show error:

```javascript
function showError(el) {
    const errorEl = el.parentElement.querySelector('span.if.input-error');
    if (el.validity.valueMissing && el.required) {
        // If the field is empty
        // display the following error message.
        // You can use the given el to extract label, name etc. to
        // provide more meaningful error messages
        errorEl.textContent = 'You need to enter something.';
        el.classList.add('is-invalid');
        el.setAttribute('aria-invalid', true);
    } else if (el.validity.typeMismatch) {
        // If the field doesn't contain the correct type
        // display the following error message.
        // You can use the given el to extract label, name etc. to
        // provide more meaningful error messages
        errorEl.textContent = 'Entered value needs to be an of correct type.';
        el.classList.add('is-invalid');
        el.setAttribute('aria-invalid', true);
    } else if (el.validity.badInput) {
        // If the field doesn't contain input the browser can't convert,
        // i.e. strings in a number field, we
        // display the following error message.
        // You can use the given el to extract label, name etc. to
        // provide more meaningful error messages
        errorEl.textContent = `Bad input, please enter a ${el.getAttribute('type')}.`;
        el.classList.add('is-invalid');
        el.setAttribute('aria-invalid', true);
    } else if (el.validity.tooShort) {
        // If the data is too short
        // display the following error message.
        // You can use the given el to extract label, name etc. to
        // provide more meaningful error messages
        errorEl.textContent = `Value should be at least ${el.minLength} characters; you entered ${el.value.length}.`;
        el.classList.add('is-invalid');
        el.setAttribute('aria-invalid', true);
    }
}
```

The comments explain things pretty well, but briefly:

-   Every time we change the value of the input, we check to see if it contains valid data. If it has then we remove any
    error message being shown. If the data is not valid, we run `showError()` to show the appropriate error.
-   Every time we try to submit the form, we again check to see if the data is valid. If so, we let the form submit. If
    not, we run `showError()` to show the appropriate error, and stop the form submitting with `preventDefault()`.
-   The `showError()` function uses various properties of the input's validity object to determine what the error is, and
    then displays an error message as appropriate.

This code can also be [seen and experienced on CodePen.](https://codepen.io/phun-ky/pen/VwaMJYM)

### Server-side validation

TBD
